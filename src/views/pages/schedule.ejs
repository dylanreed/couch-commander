<div class="space-y-8">
  <h1 class="text-3xl font-bold">Weekly Schedule</h1>

  <div class="grid gap-4">
    <% days.forEach(day => { %>
    <div class="bg-gray-800 rounded-lg p-4">
      <div class="flex justify-between items-center mb-3">
        <h2 class="font-semibold">
          <%= day.date.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' }) %>
          <% if (day.isToday) { %>
          <span class="text-purple-400 text-sm ml-2">Today</span>
          <% } %>
        </h2>
        <div class="text-sm text-gray-400">
          <span><%= day.capacity.usedMinutes %>/<%= day.capacity.totalMinutes %> min</span>
          <% if (day.capacity.availableMinutes > 0) { %>
          <span class="text-green-400 ml-2">(+<%= day.capacity.availableMinutes %> available)</span>
          <% } else if (day.capacity.availableMinutes < 0) { %>
          <span class="text-red-400 ml-2">(<%= day.capacity.availableMinutes %> over)</span>
          <% } %>
        </div>
      </div>

      <!-- Capacity Progress Bar -->
      <div class="mb-3">
        <div class="h-2 bg-gray-700 rounded-full overflow-hidden">
          <% const usedPercent = day.capacity.totalMinutes > 0 ? Math.min(100, (day.capacity.usedMinutes / day.capacity.totalMinutes) * 100) : 0; %>
          <% const barColor = day.capacity.availableMinutes < 0 ? 'bg-red-500' : (usedPercent > 80 ? 'bg-yellow-500' : 'bg-purple-500'); %>
          <div class="h-full <%= barColor %> transition-all" style="width: <%= usedPercent %>%"></div>
        </div>
      </div>

      <% if (day.episodes.length === 0) { %>
      <p class="text-gray-500 text-sm">No episodes scheduled</p>
      <% } else { %>
      <div class="space-y-2">
        <% day.episodes.forEach(ep => { %>
        <div class="flex items-center gap-3 text-sm <%= ep.status === 'watched' ? 'opacity-50' : '' %>">
          <% if (ep.status === 'watched') { %>
          <span class="text-green-400">✓</span>
          <% } else if (ep.status === 'skipped') { %>
          <span class="text-yellow-400">○</span>
          <% } else { %>
          <span class="text-gray-500">•</span>
          <% } %>
          <span class="flex-1"><%= ep.show.title %></span>
          <span class="text-gray-400">S<%= ep.season %>E<%= ep.episode %></span>
          <span class="text-gray-500"><%= ep.runtime %>m</span>
        </div>
        <% }) %>
      </div>
      <% } %>
    </div>
    <% }) %>
  </div>
</div>
