<div class="space-y-10">
  <!-- Header -->
  <div class="text-center space-y-2">
    <h1 class="font-display text-4xl font-semibold text-lounge-cream">Tonight's Lineup</h1>
    <p class="text-lounge-muted">Your curated evening entertainment</p>
  </div>

  <% if (needsCheckin && yesterdayEpisodes.length > 0) { %>
  <!-- Yesterday's Check-in -->
  <div id="checkin-section" class="bg-lounge-surface rounded-2xl border border-lounge-gold/30 p-6">
    <div class="flex items-center gap-3 mb-4">
      <div class="w-8 h-8 rounded-lg bg-lounge-gold/20 flex items-center justify-center">
        <svg class="w-4 h-4 text-lounge-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
        </svg>
      </div>
      <div>
        <h2 class="font-display text-xl font-semibold text-lounge-cream">Yesterday's Viewing</h2>
        <p class="text-sm text-lounge-muted">Quick check-in on what you watched</p>
      </div>
    </div>
    <form hx-post="/api/checkin" hx-target="#checkin-section" hx-swap="outerHTML">
      <div class="space-y-3">
        <% yesterdayEpisodes.forEach(ep => { %>
        <div class="flex items-center gap-4 bg-lounge-card rounded-xl p-4">
          <span class="flex-1 text-lounge-cream"><%= ep.show.title %> <span class="text-lounge-muted">S<%= ep.season %>E<%= ep.episode %></span></span>
          <div class="flex gap-4">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="ep_<%= ep.id %>" value="watched" checked class="accent-lounge-gold">
              <span class="text-sm text-lounge-muted">Watched</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="ep_<%= ep.id %>" value="skipped" class="accent-lounge-muted">
              <span class="text-sm text-lounge-muted">Skipped</span>
            </label>
          </div>
        </div>
        <% }) %>
      </div>
      <button type="submit" class="mt-5 btn-gold px-6 py-2.5 rounded-xl">
        Confirm
      </button>
    </form>
  </div>
  <% } %>

  <!-- Tonight's Schedule -->
  <% if (todayEpisodes.length === 0) { %>
  <div class="text-center py-16">
    <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-lounge-surface flex items-center justify-center">
      <svg class="w-10 h-10 text-lounge-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
      </svg>
    </div>
    <h2 class="font-display text-2xl text-lounge-cream mb-2">No shows tonight</h2>
    <p class="text-lounge-muted mb-6">Add some shows to your watchlist to build your schedule</p>
    <a href="/watchlist" class="btn-gold px-6 py-2.5 rounded-xl inline-block">
      Browse Shows
    </a>
  </div>
  <% } else { %>
  <div class="grid gap-4">
    <% todayEpisodes.forEach((ep, index) => { %>
    <div class="bg-lounge-surface rounded-2xl p-5 flex gap-5 card-hover status-watching" style="animation-delay: <%= index * 100 %>ms">
      <!-- Episode Number -->
      <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-lounge-card flex items-center justify-center">
        <span class="font-display text-xl text-lounge-gold"><%= index + 1 %></span>
      </div>

      <!-- Poster -->
      <% if (ep.show.posterPath) { %>
      <img src="https://image.tmdb.org/t/p/w154<%= ep.show.posterPath %>"
           alt="<%= ep.show.title %>"
           class="poster-img w-16 h-24 object-cover flex-shrink-0">
      <% } else { %>
      <div class="w-16 h-24 rounded-lg bg-lounge-card flex items-center justify-center flex-shrink-0">
        <svg class="w-6 h-6 text-lounge-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
        </svg>
      </div>
      <% } %>

      <!-- Info -->
      <div class="flex-1 min-w-0">
        <h3 class="font-display text-lg font-semibold text-lounge-cream truncate"><%= ep.show.title %></h3>
        <p class="text-lounge-muted mt-1">
          Season <%= ep.season %>, Episode <%= ep.episode %>
        </p>
        <div class="flex items-center gap-2 mt-2">
          <span class="text-xs px-2.5 py-1 rounded-full bg-lounge-card text-lounge-muted">
            <%= ep.runtime %> min
          </span>
        </div>
      </div>
    </div>
    <% }) %>
  </div>

  <!-- Total Runtime -->
  <div class="text-center pt-4 border-t border-lounge-border">
    <p class="text-lounge-muted">
      Tonight's total: <span class="text-lounge-gold font-semibold"><%= todayEpisodes.reduce((sum, ep) => sum + ep.runtime, 0) %> minutes</span>
    </p>
  </div>
  <% } %>
</div>
